

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>2.6. 协方差估计 &#8212; scikit-learn 0.19.0 中文文档 - ApacheCN</title>
<!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="../_static/css/bootstrap.min.css" media="screen" />
<link rel="stylesheet" href="../_static/css/bootstrap-responsive.css"/>

    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.11. 新奇和异常值检测" href="outlier_detection.html" />
    <link rel="prev" title="2.5. 分解成分中的信号（矩阵分解问题）" href="decomposition.html" />


<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src="../_static/js/bootstrap.min.js" type="text/javascript"></script>
<link rel="canonical" href="http://scikit-learn.org/stable/modules/covariance.html" />

<script type="text/javascript">
  $("div.buttonNext, div.buttonPrevious").hover(
     function () {
         $(this).css('background-color', '#FF9C34');
     },
     function () {
         $(this).css('background-color', '#A7D6E2');
     }
  );
  function showMenu() {
    var topNav = document.getElementById("scikit-navbar");
    if (topNav.className === "navbar") {
        topNav.className += " responsive";
    } else {
        topNav.className = "navbar";
    }
  };
</script>

  </head><body>

<div class="header-wrapper">
  <div class="header">
      <p class="logo"><a href="../index.html">
          <img src="../_static/scikit-learn-logo-small.png" alt="Logo"/>
      </a>
      </p><div class="navbar" id="scikit-navbar">
          <ul>
              <li><a href="../index.html">首页</a></li>
              <li><a href="../install.html">安装</a></li>
              <li class="btn-li">
                <div class="btn-group">
                    <a href="../documentation.html">文档</a>
                    <a class="btn dropdown-toggle" data-toggle="dropdown">
                      <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                      <li class="link-title">Scikit-learn 0.19</li>
                      <li><a href="../tutorial/index.html">教程</a></li>
                      <li><a href="../user_guide.html">用户指南</a></li>
                      <li><a href="classes.html">API</a></li>
                      <li><a href="../faq.html">FAQ</a></li>
                      <li><a href="../developers/contributing.html">贡献</a></li>
                      <li class="divider"></li>
                      <li><a href="http://scikit-learn.org/stable/documentation.html">Scikit-learn 0.19 (stable)</a></li>
                      <li><a href="http://scikit-learn.org/0.18/documentation.html">Scikit-learn 0.18</a></li>
                      <li><a href="http://scikit-learn.org/0.17/documentation.html">Scikit-learn 0.17</a></li>
                      <li><a href="../_downloads/scikit-learn-docs.pdf">PDF 文档</a></li>
                    </ul>
                </div>
              </li>
              <li><a href="../auto_examples/index.html">示例</a></li>
              <li><a href="../project-timeline.html">时光轴</a></li>
              <li class="btn-li">
                <div class="btn-group">
                    <a href="javascript:void(0)">项目相关</a>
                    <a class="btn dropdown-toggle" data-toggle="dropdown">
                      <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a href="../project-role.html">项目角色</a></li>
                      <li><a href="../project-check-progress.html">校验进度</a></li>
                      <li><a href="../project-translation-progress.html">翻译进度</a></li>
                      <li><a href="//github.com/apachecn/scikit-learn-doc-zh#%E8%B4%A1%E7%8C%AE%E8%80%85" target="_blank">贡献者</a></li>
                      <li class="divider"></li>
                      <li><a href="../project-timeline.html">时光轴</a></li>
                      <li class="divider"></li>
                      <li><a href="../project-reward.html">项目奖励</a></li>
                      <li class="divider"></li>
                      <li><a href="http://www.apachecn.org/organization/244.html" target="_blank">积分物品</a></li>
                      <li><a href="http://www.apachecn.org/organization/269.html" target="_blank">兑换记录</a></li>
                      <li class="divider"></li>
                      <li><a href="../project-feedback.html">建议反馈</a></li>
                      <li><a href="../project-communication-group.html">技术交流</a></li>
                    </ul>
                </div>
              </li>
              <li><a href="//github.com/apachecn/scikit-learn-doc-zh#%E8%B4%A1%E7%8C%AE%E8%80%85" target="_blank">贡献者</a></li>
              <li><a href="//github.com/apachecn/scikit-learn-doc-zh" target="_blank">GitHub</a></li>
          </ul>
          <a href="javascript:void(0);" onclick="showMenu()">
              <div class="nav-icon">
                  <div class="hamburger-line"></div>
                  <div class="hamburger-line"></div>
                  <div class="hamburger-line"></div>
              </div>
          </a>
          <div class="search_form">
              <div class="gcse-search" id="cse" style="width: 100%;"></div>
          </div>
      </div> <!-- end navbar --></div>
</div>


<!-- Github "fork me" ribbon -->
<a href="https://github.com/apachecn/scikit-learn-doc-zh">
<img class="fork-me"
     style="position: absolute; top: 0; right: 0; border: 0;"
     src="../_static/img/starme.png"
     alt="Star me on GitHub" />
</a>

<div class="content-wrapper">
  <div class="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
      <div class="rel">
  
      <div class="rellink">
      <a href="decomposition.html"
      accesskey="P">Previous
      <br/>
      <span class="smallrellink">
      2.5. 分解成分中的信号（矩阵分解问题）
      </span>
          <span class="hiddenrellink">
          2.5. 分解成分中的信号（矩阵分解问题）
          </span>
      </a>
      </div>
          <div class="spacer">
          &nbsp;
          </div>
      <div class="rellink">
      <a href="outlier_detection.html"
      accesskey="N">Next
      <br/>
      <span class="smallrellink">
      2.11. 新奇和异常值检测
      </span>
          <span class="hiddenrellink">
          2.11. 新奇和异常值检测
          </span>
      </a>
      </div>

  <!-- Ad a link to the 'up' page -->
      <div class="spacer">
      &nbsp;
      </div>
      <div class="rellink">
      <a href="../unsupervised_learning.html">
      Up
      <br/>
      <span class="smallrellink">
      2. 无监督学习
      </span>
          <span class="hiddenrellink">
          2. 无监督学习
          </span>
          
      </a>
      </div>
  </div>
  
    <p class="doc-version"><b>scikit-learn v0.19.0</b><br/>
    <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p>
  <p class="citing">Please <b><a href="../about.html#citing-scikit-learn" style="font-size: 110%;">cite us </a></b>if you use the software.</p>
  <ul>
<li><a class="reference internal" href="#">2.6. 协方差估计</a></li>
<li><a class="reference internal" href="#id2">2.7. 经验协方差</a></li>
<li><a class="reference internal" href="#shrunk-covariance">2.8. 收敛协方差</a><ul>
<li><a class="reference internal" href="#id4">2.8.1. 基本收敛</a></li>
<li><a class="reference internal" href="#ledoit-wolf">2.8.2. Ledoit-Wolf 收敛</a></li>
<li><a class="reference internal" href="#oracle">2.8.3. Oracle 近似收缩</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sparse-inverse-covariance">2.9. 稀疏逆协方差</a></li>
<li><a class="reference internal" href="#robust">2.10. Robust 协方差估计</a><ul>
<li><a class="reference internal" href="#id11">2.10.1. 最小协方差决定</a></li>
</ul>
</li>
</ul>

  </div>
</div>

<input type="checkbox" id="nav-trigger" class="nav-trigger" checked />
<label for="nav-trigger"></label>




    <div class="content">
          
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <hr class="docutils" id="covariance" />
<div class="section" id="id1">
<h1>2.6. 协方差估计<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>许多统计问题在某一时刻需要估计一个总体的协方差矩阵，这可以看作是对数据集散点图形状的估计。
大多数情况下，基于样本的估计（基于其属性，如尺寸，结构，均匀性），
对估计质量有很大影响。 <cite>sklearn.covariance</cite> 方法的目的是
提供一个能在各种设置下准确估计总体协方差矩阵的工具。</p>
<p>我们假设观察是独立的，相同分布的 (i.i.d.)。</p>
</div>
<div class="section" id="id2">
<h1>2.7. 经验协方差<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
<p>已知数据集的协方差矩阵与经典 <em>maximum likelihood estimator(最大似然估计)</em> （或 “经验协方差”）
很好地近似，条件是与特征数量（描述观测值的变量）相比，观测数量足够大。
更准确地说，样本的最大似然估计是相应的总体协方差矩阵的无偏估计。</p>
<p>样本的经验协方差矩阵可以使用 <a class="reference internal" href="generated/sklearn.covariance.empirical_covariance.html#sklearn.covariance.empirical_covariance" title="sklearn.covariance.empirical_covariance"><code class="xref py py-func docutils literal notranslate"><span class="pre">empirical_covariance</span></code></a> 包的函数计算 ，
或者通过 <a class="reference internal" href="generated/sklearn.covariance.EmpiricalCovariance.html#sklearn.covariance.EmpiricalCovariance" title="sklearn.covariance.EmpiricalCovariance"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmpiricalCovariance</span></code></a> 使用 <a class="reference internal" href="generated/sklearn.covariance.EmpiricalCovariance.html#sklearn.covariance.EmpiricalCovariance.fit" title="sklearn.covariance.EmpiricalCovariance.fit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EmpiricalCovariance.fit</span></code></a>
方法将对象与数据样本拟合 。
要注意，取决于数据是否居中，结果会有所不同，所以可能需要准确使用参数 <code class="docutils literal notranslate"><span class="pre">assume_centered</span></code>。
如果使用 <code class="docutils literal notranslate"><span class="pre">assume_centered=False</span></code> ，则结果更准确。且测试集应该具有与训练集相同的均值向量。
如果不是这样，两者都应该使用中心值， <code class="docutils literal notranslate"><span class="pre">assume_centered=True</span></code> 应该使用。</p>
<div class="topic">
<p class="topic-title first">例子:</p>
<ul class="simple">
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_covariance_estimation.html#sphx-glr-auto-examples-covariance-plot-covariance-estimation-py"><span class="std std-ref">Shrinkage covariance estimation: LedoitWolf vs OAS and max-likelihood</span></a> for
an example on how to fit an <a class="reference internal" href="generated/sklearn.covariance.EmpiricalCovariance.html#sklearn.covariance.EmpiricalCovariance" title="sklearn.covariance.EmpiricalCovariance"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmpiricalCovariance</span></code></a> object
to data.</li>
</ul>
</div>
</div>
<div class="section" id="shrunk-covariance">
<span id="id3"></span><h1>2.8. 收敛协方差<a class="headerlink" href="#shrunk-covariance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id4">
<h2>2.8.1. 基本收敛<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>尽管是协方差矩阵的无偏估计，
最大似然估计不是协方差矩阵的特征值的一个很好的估计，
所以从反演得到的精度矩阵是不准确的。
有时，甚至出现数学原因，经验协方差矩阵不能反转。
为了避免这样的反演问题，引入了经验协方差矩阵的一种变换方式：<code class="docutils literal notranslate"><span class="pre">shrinkage</span></code> 。</p>
<p>在 scikit-learn 中，该变换（具有用户定义的收缩系数）
可以直接应用于使用 <a class="reference internal" href="generated/sklearn.covariance.shrunk_covariance.html#sklearn.covariance.shrunk_covariance" title="sklearn.covariance.shrunk_covariance"><code class="xref py py-func docutils literal notranslate"><span class="pre">shrunk_covariance</span></code></a> 方法预先计算协方差。
此外，协方差的收缩估计可以用 <a class="reference internal" href="generated/sklearn.covariance.ShrunkCovariance.html#sklearn.covariance.ShrunkCovariance" title="sklearn.covariance.ShrunkCovariance"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShrunkCovariance</span></code></a> 对象
及其 <a class="reference internal" href="generated/sklearn.covariance.ShrunkCovariance.html#sklearn.covariance.ShrunkCovariance.fit" title="sklearn.covariance.ShrunkCovariance.fit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ShrunkCovariance.fit</span></code></a> 方法拟合到数据中。
再次，根据数据是否居中，结果会不同，所以可能要准确使用参数 <code class="docutils literal notranslate"><span class="pre">assume_centered</span></code> 。</p>
<p>在数学上，这种收缩在于减少经验协方差矩阵的最小和最大特征值之间的比率。
可以通过简单地根据给定的偏移量移动每个特征值来完成，
这相当于找到协方差矩阵的l2惩罚的最大似然估计器（l2-penalized Maximum
Likelihood Estimator）。在实践中，收缩归结为简单的凸变换：
<span class="math">\Sigma_{\rm
shrunk} = (1-\alpha)\hat{\Sigma} + \alpha\frac{{\rm
Tr}\hat{\Sigma}}{p}\rm Id</span>.</p>
<p>选择收缩量， <span class="math">\alpha</span> 相当于设置偏差/方差权衡，下面将讨论。</p>
<div class="topic">
<p class="topic-title first">示例:</p>
<ul class="simple">
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_covariance_estimation.html#sphx-glr-auto-examples-covariance-plot-covariance-estimation-py"><span class="std std-ref">Shrinkage covariance estimation: LedoitWolf vs OAS and max-likelihood</span></a> for
an example on how to fit a <a class="reference internal" href="generated/sklearn.covariance.ShrunkCovariance.html#sklearn.covariance.ShrunkCovariance" title="sklearn.covariance.ShrunkCovariance"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShrunkCovariance</span></code></a> object
to data.</li>
</ul>
</div>
</div>
<div class="section" id="ledoit-wolf">
<h2>2.8.2. Ledoit-Wolf 收敛<a class="headerlink" href="#ledoit-wolf" title="Permalink to this headline">¶</a></h2>
<p>在他们的 2004 年的论文 <a class="footnote-reference" href="#id6" id="id5">[1]</a> 中， O.Ledoit 和 M.Wolf 提出了一个公式，
用来计算优化的收敛系数 <span class="math">\alpha</span> ，
它使得估计协方差和实际协方差矩阵之间的均方差进行最小化。</p>
<p>在 <cite>sklearn.covariance</cite> 包中，可以使用 <a class="reference internal" href="generated/sklearn.covariance.ledoit_wolf.html#sklearn.covariance.ledoit_wolf" title="sklearn.covariance.ledoit_wolf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ledoit_wolf</span></code></a> 函数来计算样本的
基于 Ledoit-Wolf estimator 的协方差， 或者可以针对同样的样本
通过拟合 <a class="reference internal" href="generated/sklearn.covariance.LedoitWolf.html#sklearn.covariance.LedoitWolf" title="sklearn.covariance.LedoitWolf"><code class="xref py py-class docutils literal notranslate"><span class="pre">LedoitWolf</span></code></a> 对象来获得。</p>
<div class="topic">
<p class="topic-title first">例子:</p>
<ul class="simple">
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_covariance_estimation.html#sphx-glr-auto-examples-covariance-plot-covariance-estimation-py"><span class="std std-ref">Shrinkage covariance estimation: LedoitWolf vs OAS and max-likelihood</span></a>
关于如何将 <a class="reference internal" href="generated/sklearn.covariance.LedoitWolf.html#sklearn.covariance.LedoitWolf" title="sklearn.covariance.LedoitWolf"><code class="xref py py-class docutils literal notranslate"><span class="pre">LedoitWolf</span></code></a> 对象与数据拟合，
并将 Ledoit-Wolf 估计器的性能进行可视化的示例。</li>
</ul>
</div>
<div class="topic">
<p class="topic-title first">参考文献:</p>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[1]</a></td><td>O. Ledoit and M. Wolf, “A Well-Conditioned Estimator for Large-Dimensional
Covariance Matrices”, Journal of Multivariate Analysis, Volume 88, Issue 2,
February 2004, pages 365-411.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="oracle">
<span id="oracle-approximating-shrinkage"></span><h2>2.8.3. Oracle 近似收缩<a class="headerlink" href="#oracle" title="Permalink to this headline">¶</a></h2>
<p>在数据为高斯分布的假设下，Chen et al. 等 <a class="footnote-reference" href="#id8" id="id7">[2]</a>  推导出了一个公式，旨在
产生比 Ledoit 和 Wolf 公式具有更小均方差的收敛系数。
所得到的估计器被称为协方差的 Oracle 收缩近似估计器。</p>
<p>在 <cite>sklearn.covariance</cite> 包中， OAS 估计的协方差可以使用函数 <a class="reference internal" href="generated/sklearn.covariance.oas.html#sklearn.covariance.oas" title="sklearn.covariance.oas"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oas</span></code></a> 对样本进行计算，或者可以通过将 <a class="reference internal" href="generated/sklearn.covariance.OAS.html#sklearn.covariance.OAS" title="sklearn.covariance.OAS"><code class="xref py py-class docutils literal notranslate"><span class="pre">OAS</span></code></a> 对象拟合到相同的样本来获得。</p>
<div class="figure align-center" id="id16">
<a class="reference external image-reference" href="../auto_examples/covariance/plot_covariance_estimation.html"><img alt="modules/../auto_examples/covariance/images/sphx_glr_plot_covariance_estimation_001.png" src="modules/../auto_examples/covariance/images/sphx_glr_plot_covariance_estimation_001.png" /></a>
<p class="caption"><span class="caption-text">设定收缩时的偏差方差权衡：比较 Ledoit-Wolf 和 OAS 估计量的选择</span></p>
</div>
<div class="topic">
<p class="topic-title first">参考文献:</p>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[2]</a></td><td>Chen et al., “Shrinkage Algorithms for MMSE Covariance Estimation”,
IEEE Trans. on Sign. Proc., Volume 58, Issue 10, October 2010.</td></tr>
</tbody>
</table>
</div>
<div class="topic">
<p class="topic-title first">示例:</p>
<ul class="simple">
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_covariance_estimation.html#sphx-glr-auto-examples-covariance-plot-covariance-estimation-py"><span class="std std-ref">Shrinkage covariance estimation: LedoitWolf vs OAS and max-likelihood</span></a> for
an example on how to fit an <a class="reference internal" href="generated/sklearn.covariance.OAS.html#sklearn.covariance.OAS" title="sklearn.covariance.OAS"><code class="xref py py-class docutils literal notranslate"><span class="pre">OAS</span></code></a> object
to data.</li>
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_lw_vs_oas.html#sphx-glr-auto-examples-covariance-plot-lw-vs-oas-py"><span class="std std-ref">Ledoit-Wolf vs OAS estimation</span></a> to visualize the
Mean Squared Error difference between a <a class="reference internal" href="generated/sklearn.covariance.LedoitWolf.html#sklearn.covariance.LedoitWolf" title="sklearn.covariance.LedoitWolf"><code class="xref py py-class docutils literal notranslate"><span class="pre">LedoitWolf</span></code></a> and
an <a class="reference internal" href="generated/sklearn.covariance.OAS.html#sklearn.covariance.OAS" title="sklearn.covariance.OAS"><code class="xref py py-class docutils literal notranslate"><span class="pre">OAS</span></code></a> estimator of the covariance.</li>
</ul>
</div>
<div class="figure align-center">
<a class="reference external image-reference" href="../auto_examples/covariance/plot_lw_vs_oas.html"><img alt="modules/../auto_examples/covariance/images/sphx_glr_plot_lw_vs_oas_001.png" src="modules/../auto_examples/covariance/images/sphx_glr_plot_lw_vs_oas_001.png" /></a>
</div>
</div>
</div>
<div class="section" id="sparse-inverse-covariance">
<span id="id9"></span><h1>2.9. 稀疏逆协方差<a class="headerlink" href="#sparse-inverse-covariance" title="Permalink to this headline">¶</a></h1>
<p>协方差矩阵的逆矩阵，通常称为精度矩阵（precision matrix），它与部分相关矩阵（partial correlation matrix）成正比。
它给出部分独立性关系。换句话说，如果两个特征在其他特征上有条件地独立，
则精度矩阵中的对应系数将为零。这就是为什么估计一个稀疏精度矩阵是有道理的：
通过从数据中学习独立关系，协方差矩阵的估计能更好处理。这被称为协方差选择。</p>
<p>在小样本的情况，即 <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> 是数量级 <code class="docutils literal notranslate"><span class="pre">n_features</span></code> 或更小，
稀疏的逆协方差估计往往比收敛的协方差估计更好。
然而，在相反的情况下，或者对于非常相关的数据，它们可能在数值上不稳定。
此外，与收敛估算不同，稀疏估计器能够恢复非对角线结构 （off-diagonal structure）。</p>
<p><a class="reference internal" href="generated/sklearn.covariance.GraphLasso.html#sklearn.covariance.GraphLasso" title="sklearn.covariance.GraphLasso"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphLasso</span></code></a> 估计器使用 L1 惩罚执行关于精度矩阵的稀疏性：
<code class="docutils literal notranslate"><span class="pre">alpha</span></code> 参数越高，精度矩阵的稀疏性越大。
相应的 <a class="reference internal" href="generated/sklearn.covariance.GraphLassoCV.html#sklearn.covariance.GraphLassoCV" title="sklearn.covariance.GraphLassoCV"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphLassoCV</span></code></a> 对象使用交叉验证来自动设置 <code class="docutils literal notranslate"><span class="pre">alpha</span></code> 参数。</p>
<div class="figure align-center">
<a class="reference external image-reference" href="../auto_examples/covariance/plot_sparse_cov.html"><img alt="modules/../auto_examples/covariance/images/sphx_glr_plot_sparse_cov_001.png" src="modules/../auto_examples/covariance/images/sphx_glr_plot_sparse_cov_001.png" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>结构恢复</strong></p>
<p>从数据中的相关性恢复图形结构是一个具有挑战性的事情。如果您对这种恢复感兴趣，请记住：</p>
<ul class="last simple">
<li>相关矩阵的恢复比协方差矩阵更容易：在运行 <a class="reference internal" href="generated/sklearn.covariance.GraphLasso.html#sklearn.covariance.GraphLasso" title="sklearn.covariance.GraphLasso"><code class="xref py py-class docutils literal notranslate"><span class="pre">GraphLasso</span></code></a> 前先标准化观察值</li>
<li>如果底层图具有比平均节点更多的连接节点，则算法将错过其中一些连接。</li>
<li>如果您的观察次数与底层图形中的边数相比不大，则不会恢复。</li>
<li>即使您具有良好的恢复条件，通过交叉验证（例如使用GraphLassoCV对象）选择的 Alpha 参数将导致选择太多边。
然而，相关边缘将具有比不相关边缘更重的权重。</li>
</ul>
</div>
<p>数学公式如下：</p>
<div class="math">
<p><span class="math">\hat{K} = \mathrm{argmin}_K \big(
            \mathrm{tr} S K - \mathrm{log} \mathrm{det} K
            + \alpha \|K\|_1
            \big)</span></p>
</div><p>其中：<span class="math">K</span> 是要估计的精度矩阵（precision matrix）， <span class="math">S</span> 是样本的协方差矩阵。
<span class="math">\|K\|_1</span> 是非对角系数 <span class="math">K</span> （off-diagonal coefficients）的绝对值之和。
用于解决这个问题的算法是来自 Friedman 2008 Biostatistics 论文的 GLasso 算法。
它与 R 语言 <code class="docutils literal notranslate"><span class="pre">glasso</span></code> 包中的算法相同。</p>
<div class="topic">
<p class="topic-title first">例子:</p>
<ul class="simple">
<li><a class="reference internal" href="../auto_examples/covariance/plot_sparse_cov.html#sphx-glr-auto-examples-covariance-plot-sparse-cov-py"><span class="std std-ref">Sparse inverse covariance estimation</span></a>:</li>
</ul>
<p>合成数据示例，显示结构的一些恢复，并与其他协方差估计器进行比较。</p>
<ul class="simple">
<li><a class="reference internal" href="../auto_examples/applications/plot_stock_market.html#sphx-glr-auto-examples-applications-plot-stock-market-py"><span class="std std-ref">Visualizing the stock market structure</span></a>:
真实股票市场数据示例，查找哪些信号最相关。</li>
</ul>
</div>
<div class="topic">
<p class="topic-title first">参考文献:</p>
<ul class="simple">
<li>Friedman et al, <a class="reference external" href="http://biostatistics.oxfordjournals.org/content/9/3/432.short">“Sparse inverse covariance estimation with the
graphical lasso”</a>,
Biostatistics 9, pp 432, 2008</li>
</ul>
</div>
</div>
<div class="section" id="robust">
<span id="robust-covariance"></span><h1>2.10. Robust 协方差估计<a class="headerlink" href="#robust" title="Permalink to this headline">¶</a></h1>
<p>实际数据集通常是会有测量或记录错误。合格但不常见的观察也可能出于各种原因。
每个不常见的观察称为异常值。
上面提出的经验协方差估计器和收缩协方差估计器对数据中异常观察值非常敏感。
因此，应该使用更好的协方差估计（robust covariance estimators）来估算其真实数据集的协方差。
或者，可以使用更好的协方差估计器（robust covariance estimators）来执行异常值检测，
并根据数据的进一步处理，丢弃/降低某些观察值。</p>
<p><code class="docutils literal notranslate"><span class="pre">sklearn.covariance</span></code> 包实现了 robust estimator of covariance， 即 Minimum Covariance Determinant <a class="footnote-reference" href="#id14" id="id10">[3]</a> 。</p>
<div class="section" id="id11">
<h2>2.10.1. 最小协方差决定<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>最小协方差决定（Minimum Covariance Determinant）估计器是
由 P.J. Rousseeuw 在 <a class="footnote-reference" href="#id14" id="id12">[3]</a> 中引入的数据集协方差的鲁棒估计 (robust estimator)。
这个想法是找出一个给定比例（h）的 “好” 观察值，它们不是离群值，
且可以计算其经验协方差矩阵。
然后将该经验协方差矩阵重新缩放以补偿所执行的观察选择（”consistency step(一致性步骤)”）。
计算最小协方差决定估计器后，可以根据其马氏距离（Mahalanobis distance）给出观测值的权重，
这导致数据集的协方差矩阵的重新加权估计（”reweighting step(重新加权步骤)”）。</p>
<p>Rousseeuw 和 Van Driessen  <a class="footnote-reference" href="#id15" id="id13">[4]</a> 开发了 FastMCD 算法，以计算最小协方差决定因子（Minimum Covariance Determinant）。
在 scikit-learn 中，该算法在将 MCD 对象拟合到数据时应用。FastMCD 算法同时计算数据集位置的鲁棒估计。</p>
<p>Raw估计可通过 <a class="reference internal" href="generated/sklearn.covariance.MinCovDet.html#sklearn.covariance.MinCovDet" title="sklearn.covariance.MinCovDet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MinCovDet</span></code></a> 对象的 <code class="docutils literal notranslate"><span class="pre">raw_location_</span></code> 和 <code class="docutils literal notranslate"><span class="pre">raw_covariance_</span></code> 属性获得。</p>
<div class="topic">
<p class="topic-title first">参考文献:</p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><em>(<a class="fn-backref" href="#id10">1</a>, <a class="fn-backref" href="#id12">2</a>)</em> P. J. Rousseeuw. Least median of squares regression.
J. Am Stat Ass, 79:871, 1984.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[4]</a></td><td>A Fast Algorithm for the Minimum Covariance Determinant Estimator,
1999, American Statistical Association and the American Society
for Quality, TECHNOMETRICS.</td></tr>
</tbody>
</table>
</div>
<div class="topic">
<p class="topic-title first">例子:</p>
<ul class="simple">
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_robust_vs_empirical_covariance.html#sphx-glr-auto-examples-covariance-plot-robust-vs-empirical-covariance-py"><span class="std std-ref">Robust vs Empirical covariance estimate</span></a>
关于如何将对象 <a class="reference internal" href="generated/sklearn.covariance.MinCovDet.html#sklearn.covariance.MinCovDet" title="sklearn.covariance.MinCovDet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MinCovDet</span></code></a> 与数据拟合的示例， 尽管存在异常值，但估计结果仍然比较准确。</li>
<li>See <a class="reference internal" href="../auto_examples/covariance/plot_mahalanobis_distances.html#sphx-glr-auto-examples-covariance-plot-mahalanobis-distances-py"><span class="std std-ref">Robust covariance estimation and Mahalanobis distances relevance</span></a>
马氏距离（Mahalanobis distance），针对协方差估计器 <a class="reference internal" href="generated/sklearn.covariance.EmpiricalCovariance.html#sklearn.covariance.EmpiricalCovariance" title="sklearn.covariance.EmpiricalCovariance"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmpiricalCovariance</span></code></a> 和
<a class="reference internal" href="generated/sklearn.covariance.MinCovDet.html#sklearn.covariance.MinCovDet" title="sklearn.covariance.MinCovDet"><code class="xref py py-class docutils literal notranslate"><span class="pre">MinCovDet</span></code></a> 之间的差异进行可视化。（所以我们得到了精度矩阵的更好估计）</li>
</ul>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Influence of outliers on location and covariance estimates</th>
<th class="head">Separating inliers from outliers using a Mahalanobis distance</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="../auto_examples/covariance/plot_robust_vs_empirical_covariance.html"><img alt="robust_vs_emp" src="modules/../auto_examples/covariance/images/sphx_glr_plot_robust_vs_empirical_covariance_001.png" /></a></td>
<td><a class="reference external" href="../auto_examples/covariance/plot_mahalanobis_distances.html"><img alt="mahalanobis" src="modules/../auto_examples/covariance/images/sphx_glr_plot_mahalanobis_distances_001.png" /></a></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>

      <!-- 评论留言区代码 start -->
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDAwMi8xMDU0MA==">
        <script type="text/javascript">
        (function(d, s) {
            var j, e = d.getElementsByTagName(s)[0];

            if (typeof LivereTower === 'function') { return; }

            j = d.createElement(s);
            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
            j.async = true;

            e.parentNode.insertBefore(j, e);
        })(document, 'script');
        </script>
      </div>
      <!-- 评论留言区代码 end -->

    </div>

    <!-- 提 PR 时按原来文档的字母排序 -->

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    

    

    

    

    

    
    <!-- modules/covariance.html -->
    <div class="apachecn_doc_right">
      校验者: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/apachecn/scikit-learn-doc-zh">@李昊伟</a><br/>
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/apachecn/scikit-learn-doc-zh">@小瑶</a><br/>
      翻译者: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/apachecn/scikit-learn-doc-zh">@柠檬</a><br/>    
    </div>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </div>

  <div class="footer">
      &copy; 2007 - 2017, scikit-learn developers (BSD License).
    <a href="../_sources/modules/covariance.rst.txt" rel="nofollow">Show this page source</a>
  </div>
   <div class="rel">
  
  <div class="buttonPrevious">
    <a href="decomposition.html">Previous
    </a>
  </div>
  <div class="buttonNext">
    <a href="outlier_detection.html">Next
    </a>
  </div>
  
   </div>

  <!-- google analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-102475051-5', 'auto');
    ga('send', 'pageview');
  
  </script>
  
  <!-- baidu tongji -->
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?9cbab13b4d28a9811ae1d2d2176dab66";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>

  <!-- baidu push -->
  <script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script>
  </body>
</html>